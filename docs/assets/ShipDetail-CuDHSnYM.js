import{c as r,d as M,u as T,r as o,j as e}from"./index-Cajg6Qr7.js";import{c as $,d as _,e as I,f as O,g as E}from"./useSpaceTraders-DaRezP3D.js";import{i as D,d as P,c as m,b as F,g as q}from"./helpers-DIVcxWFQ.js";import{C as L}from"./circle-alert-twBBD7cj.js";import{F as u}from"./fuel-Cb5d81pG.js";import{N as z}from"./navigation-BJxot-cG.js";import{P as N}from"./package-QTFXR8Bq.js";/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["path",{d:"M12 22V8",key:"qkxhtm"}],["path",{d:"M5 12H2a10 10 0 0 0 20 0h-3",key:"1hv3nh"}],["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}]],K=r("anchor",H);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],V=r("arrow-left",B);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["path",{d:"M20.341 6.484A10 10 0 0 1 10.266 21.85",key:"1enhxb"}],["path",{d:"M3.659 17.516A10 10 0 0 1 13.74 2.152",key:"1crzgf"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["circle",{cx:"19",cy:"5",r:"2",key:"mhkx31"}],["circle",{cx:"5",cy:"19",r:"2",key:"v8kfzx"}]],G=r("orbit",Q);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["path",{d:"m14 13-8.381 8.38a1 1 0 0 1-3.001-3L11 9.999",key:"1lw9ds"}],["path",{d:"M15.973 4.027A13 13 0 0 0 5.902 2.373c-1.398.342-1.092 2.158.277 2.601a19.9 19.9 0 0 1 5.822 3.024",key:"ffj4ej"}],["path",{d:"M16.001 11.999a19.9 19.9 0 0 1 3.024 5.824c.444 1.369 2.26 1.676 2.603.278A13 13 0 0 0 20 8.069",key:"8tj4zw"}],["path",{d:"M18.352 3.352a1.205 1.205 0 0 0-1.704 0l-5.296 5.296a1.205 1.205 0 0 0 0 1.704l2.296 2.296a1.205 1.205 0 0 0 1.704 0l5.296-5.296a1.205 1.205 0 0 0 0-1.704z",key:"hh6h97"}]],U=r("pickaxe",J);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],X=r("refresh-cw",W),ne=()=>{const{shipSymbol:a}=M(),l=T(),{data:s,isLoading:v,refetch:n}=$(a),x=_(),h=I(),g=O(),y=E(),[i,f]=o.useState("overview"),[d,p]=o.useState(0);if(o.useEffect(()=>{if(s&&s.cooldown&&D(s.cooldown.expiration)){const t=setInterval(()=>{const b=P(s.cooldown.expiration);p(b),b===0&&n()},1e3);return()=>clearInterval(t)}},[s,n]),v||!s)return e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"text-center py-12 text-gray-400",children:"Loading ship details..."})});const w=async()=>{try{await x.mutateAsync(s.symbol)}catch(t){alert(t.response?.data?.error?.message||"Failed to dock ship")}},k=async()=>{try{await h.mutateAsync(s.symbol)}catch(t){alert(t.response?.data?.error?.message||"Failed to orbit ship")}},C=async()=>{try{await g.mutateAsync(s.symbol),alert("Resources extracted successfully!")}catch(t){alert(t.response?.data?.error?.message||"Failed to extract resources")}},S=async()=>{try{await y.mutateAsync(s.symbol),alert("Ship refueled successfully!")}catch(t){alert(t.response?.data?.error?.message||"Failed to refuel ship")}},R=m(s.fuel.current,s.fuel.capacity),j=d>0,A=[{id:"overview",label:"Overview"},{id:"cargo",label:"Cargo"},{id:"actions",label:"Actions"}];return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>l("/fleet"),className:"p-2 hover:bg-gray-700 rounded transition-colors",children:e.jsx(V,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:s.registration.name}),e.jsx("p",{className:"text-gray-400",children:s.symbol})]}),e.jsxs("button",{onClick:()=>n(),className:"btn-secondary flex items-center gap-2",children:[e.jsx(X,{className:"w-4 h-4"}),"Refresh"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Status"}),e.jsx("span",{className:`badge ${s.nav.status==="DOCKED"?"badge-success":s.nav.status==="IN_ORBIT"?"badge-warning":"badge-info"}`,children:s.nav.status.replace("_"," ")})]}),e.jsx("p",{className:"text-sm text-gray-300",children:s.nav.waypointSymbol}),s.nav.status==="IN_TRANSIT"&&s.nav.route.arrival&&e.jsxs("p",{className:"text-xs text-blue-400 mt-2",children:["Arrives in ",F(s.nav.route.arrival)]})]}),e.jsxs("div",{className:"card",children:[e.jsx("span",{className:"text-sm text-gray-400 mb-2 block",children:"Role"}),e.jsx("span",{className:`badge ${q(s.registration.role)}`,children:s.registration.role.replace("_"," ")})]}),e.jsxs("div",{className:"card",children:[e.jsx("span",{className:"text-sm text-gray-400 mb-2 block",children:"Flight Mode"}),e.jsx("span",{className:"badge badge-info",children:s.nav.flightMode})]})]}),j&&e.jsx("div",{className:"card bg-yellow-500/10 border-yellow-500/30",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(L,{className:"w-5 h-5 text-yellow-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-yellow-400 font-semibold",children:"Ship on Cooldown"}),e.jsxs("p",{className:"text-sm text-gray-300",children:[Math.floor(d/60),"m ",d%60,"s remaining"]})]})]})}),e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[s.nav.status!=="DOCKED"&&e.jsxs("button",{onClick:w,disabled:x.isPending||s.nav.status==="IN_TRANSIT",className:"btn-secondary flex items-center justify-center gap-2 disabled:opacity-50",children:[e.jsx(K,{className:"w-4 h-4"}),"Dock"]}),s.nav.status==="DOCKED"&&e.jsxs("button",{onClick:k,disabled:h.isPending,className:"btn-secondary flex items-center justify-center gap-2",children:[e.jsx(G,{className:"w-4 h-4"}),"Orbit"]}),e.jsxs("button",{onClick:S,disabled:y.isPending||s.nav.status!=="DOCKED"||R===100,className:"btn-secondary flex items-center justify-center gap-2 disabled:opacity-50",children:[e.jsx(u,{className:"w-4 h-4"}),"Refuel"]}),e.jsxs("button",{onClick:C,disabled:g.isPending||s.nav.status!=="IN_ORBIT"||j||s.cargo.units>=s.cargo.capacity,className:"btn-secondary flex items-center justify-center gap-2 disabled:opacity-50",children:[e.jsx(U,{className:"w-4 h-4"}),"Extract"]}),e.jsxs("button",{onClick:()=>l("/navigation"),disabled:s.nav.status==="IN_TRANSIT",className:"btn-primary flex items-center justify-center gap-2 disabled:opacity-50",children:[e.jsx(z,{className:"w-4 h-4"}),"Navigate"]})]})]}),e.jsx("div",{className:"flex gap-2 border-b border-gray-700",children:A.map(t=>e.jsx("button",{onClick:()=>f(t.id),className:`px-4 py-2 font-medium transition-colors ${i===t.id?"text-space-accent border-b-2 border-space-accent":"text-gray-400 hover:text-white"}`,children:t.label},t.id))}),e.jsxs("div",{children:[i==="overview"&&e.jsx(Y,{ship:s}),i==="cargo"&&e.jsx(Z,{ship:s}),i==="actions"&&e.jsx(ee,{})]})]})},Y=({ship:a})=>{const l=m(a.fuel.current,a.fuel.capacity),s=m(a.cargo.units,a.cargo.capacity);return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Resources"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-300",children:[e.jsx(u,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Fuel"})]}),e.jsxs("span",{className:"text-sm text-gray-400",children:[a.fuel.current," / ",a.fuel.capacity]})]}),e.jsx("div",{className:"h-3 bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all ${l>50?"bg-green-500":l>25?"bg-yellow-500":"bg-red-500"}`,style:{width:`${l}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-300",children:[e.jsx(N,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Cargo"})]}),e.jsxs("span",{className:"text-sm text-gray-400",children:[a.cargo.units," / ",a.cargo.capacity]})]}),e.jsx("div",{className:"h-3 bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all ${s<80?"bg-blue-500":s<100?"bg-yellow-500":"bg-red-500"}`,style:{width:`${s}%`}})})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Ship Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(c,{label:"Frame",value:a.frame.name}),e.jsx(c,{label:"Reactor",value:a.reactor.name}),e.jsx(c,{label:"Engine",value:a.engine.name}),e.jsx(c,{label:"Speed",value:a.engine.speed.toString()}),e.jsx(c,{label:"Modules",value:a.modules.length.toString()}),e.jsx(c,{label:"Mounts",value:a.mounts.length.toString()})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Crew"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(c,{label:"Current",value:`${a.crew.current} / ${a.crew.capacity}`}),e.jsx(c,{label:"Required",value:a.crew.required.toString()}),e.jsx(c,{label:"Morale",value:`${a.crew.morale}%`}),e.jsx(c,{label:"Rotation",value:a.crew.rotation})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Condition"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Frame Integrity"}),e.jsxs("span",{className:"text-sm text-gray-300",children:[a.frame.integrity,"%"]})]}),e.jsx("div",{className:"h-2 bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${a.frame.integrity>75?"bg-green-500":a.frame.integrity>50?"bg-yellow-500":"bg-red-500"}`,style:{width:`${a.frame.integrity}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Engine Condition"}),e.jsxs("span",{className:"text-sm text-gray-300",children:[a.engine.condition,"%"]})]}),e.jsx("div",{className:"h-2 bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${a.engine.condition>75?"bg-green-500":a.engine.condition>50?"bg-yellow-500":"bg-red-500"}`,style:{width:`${a.engine.condition}%`}})})]})]})]})]})},Z=({ship:a})=>e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Cargo Hold"}),a.cargo.inventory.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.cargo.inventory.map((l,s)=>e.jsxs("div",{className:"p-4 bg-gray-800/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium text-white",children:l.name}),e.jsx("span",{className:"badge badge-info",children:l.units})]}),e.jsx("p",{className:"text-xs text-gray-400",children:l.symbol}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:l.description})]},s))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(N,{className:"w-12 h-12 text-gray-600 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-400",children:"Cargo hold is empty"})]})]}),ee=()=>e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Available Actions"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-gray-800/50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-white mb-2",children:"Mining Operations"}),e.jsx("p",{className:"text-sm text-gray-400 mb-3",children:"Extract resources from asteroid fields. Requires ship to be in orbit."}),e.jsx("div",{className:"text-xs text-gray-500",children:"Cooldown: Varies by operation â€¢ Cargo space required"})]}),e.jsxs("div",{className:"p-4 bg-gray-800/50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-white mb-2",children:"Trading"}),e.jsx("p",{className:"text-sm text-gray-400 mb-3",children:"Buy and sell goods at markets. Ship must be docked at a waypoint with a marketplace."}),e.jsx("div",{className:"text-xs text-gray-500",children:"Available when docked at market waypoints"})]}),e.jsxs("div",{className:"p-4 bg-gray-800/50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-white mb-2",children:"Navigation"}),e.jsx("p",{className:"text-sm text-gray-400 mb-3",children:"Travel to different waypoints in the system or jump to other systems."}),e.jsx("div",{className:"text-xs text-gray-500",children:"Fuel consumption varies by distance and flight mode"})]})]})]}),c=({label:a,value:l})=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-400",children:a}),e.jsx("span",{className:"text-sm text-gray-200",children:l})]});export{ne as default};
