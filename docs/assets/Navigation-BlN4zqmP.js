import{c as w,r as c,j as e}from"./index-Cajg6Qr7.js";import{a as S,k as M,h as T}from"./useSpaceTraders-DaRezP3D.js";import{h as C,j as D,k as I,l as L}from"./helpers-DIVcxWFQ.js";import{L as u}from"./LoadingState-CrclXfPb.js";import{M as F}from"./map-pin-Y__dtIf8.js";import{F as _}from"./fuel-Cb5d81pG.js";import{C as k}from"./clock-B4d008v6.js";import{N}from"./navigation-BJxot-cG.js";/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],R=w("send",P),Y=()=>{const{data:m,isLoading:h}=S(),[t,v]=c.useState(""),[i,p]=c.useState(""),x=M(),s=c.useMemo(()=>m?.find(a=>a.symbol===t),[m,t]),j=s?.nav.systemSymbol||"",{data:g,isLoading:r}=T(j),n=c.useMemo(()=>g?.data??[],[g]);if(h)return e.jsx("div",{className:"p-6",children:e.jsx(u,{label:"Navigation",description:"Fetching ship telemetry..."})});const y=async()=>{if(!(!t||!i))try{await x.mutateAsync({shipSymbol:t,waypointSymbol:i}),alert("Navigation started!"),p("")}catch(a){alert(a.response?.data?.error?.message||"Failed to navigate")}},d=c.useMemo(()=>n.find(a=>a.symbol===i),[i,n]),l=s&&d?C(s.nav.route.origin.x,s.nav.route.origin.y,d.x,d.y):0,o=l>0?D(l,s?.nav.flightMode):0,b=s&&l>0?I(l,s.engine.speed,s.nav.flightMode):0,f=s&&s.nav.status!=="IN_TRANSIT"&&i&&o<=s.fuel.current;return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Navigation"}),e.jsx("p",{className:"text-gray-400",children:"Plan and execute ship movements"})]}),e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Select Ship"}),e.jsxs("select",{value:t,onChange:a=>v(a.target.value),className:"input w-full",children:[e.jsx("option",{value:"",children:"Choose a ship..."}),m?.filter(a=>a.nav.status!=="IN_TRANSIT").map(a=>e.jsxs("option",{value:a.symbol,children:[a.registration.name," - ",a.nav.waypointSymbol]},a.symbol))]})]}),s&&e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Current Location"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"System"}),e.jsx("p",{className:"text-white font-medium",children:s.nav.systemSymbol})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Waypoint"}),e.jsx("p",{className:"text-white font-medium",children:s.nav.waypointSymbol})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Status"}),e.jsx("span",{className:`badge ${s.nav.status==="DOCKED"?"badge-success":s.nav.status==="IN_ORBIT"?"badge-warning":"badge-info"}`,children:s.nav.status.replace("_"," ")})]})]})]}),s&&(h||r)&&e.jsx("div",{className:"card",children:e.jsx(u,{label:"Destinations",description:"Mapping system waypoints..."})}),s&&!r&&n.length>0&&e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Select Destination"}),e.jsxs("select",{value:i,onChange:a=>p(a.target.value),className:"input w-full",children:[e.jsx("option",{value:"",children:"Choose a destination..."}),n.filter(a=>a.symbol!==s.nav.waypointSymbol).map(a=>e.jsxs("option",{value:a.symbol,children:[a.symbol," - ",a.type.replace("_"," ")]},a.symbol))]})]}),s&&!r&&n.length===0&&e.jsx("div",{className:"card text-center py-12 text-gray-400",children:"No alternative waypoints detected in this system."}),s&&!r&&d&&e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Route Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"p-4 bg-gray-800/50 rounded",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-400 mb-2",children:[e.jsx(F,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Distance"})]}),e.jsx("p",{className:"text-xl font-semibold text-white",children:Math.round(l)})]}),e.jsxs("div",{className:"p-4 bg-gray-800/50 rounded",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-400 mb-2",children:[e.jsx(_,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Fuel Needed"})]}),e.jsxs("p",{className:"text-xl font-semibold text-white",children:[o," / ",s.fuel.current]})]}),e.jsxs("div",{className:"p-4 bg-gray-800/50 rounded",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-400 mb-2",children:[e.jsx(k,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Travel Time"})]}),e.jsx("p",{className:"text-xl font-semibold text-white",children:L(b)})]}),e.jsxs("div",{className:"p-4 bg-gray-800/50 rounded",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-400 mb-2",children:[e.jsx(N,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Flight Mode"})]}),e.jsx("p",{className:"text-xl font-semibold text-white",children:s.nav.flightMode})]})]}),o>s.fuel.current&&e.jsx("div",{className:"p-4 bg-red-500/10 border border-red-500/30 rounded mb-4",children:e.jsxs("p",{className:"text-red-400 text-sm",children:["⚠️ Insufficient fuel! You need ",o," fuel but only have ",s.fuel.current,". Please refuel before navigating."]})}),e.jsxs("button",{onClick:y,disabled:!f||x.isPending,className:"btn-primary w-full flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(R,{className:"w-4 h-4"}),x.isPending?"Navigating...":"Start Navigation"]})]}),!t&&e.jsxs("div",{className:"card text-center py-12",children:[e.jsx(N,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"Select a ship to begin navigation"})]})]})};export{Y as default};
